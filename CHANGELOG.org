* [2.3.0] - 2025-03-01
** Features
*** Add tag relationship management module (org-supertag-relation.el)
- Implement sophisticated tag relationship system with symbolic representation
  - Add 10 relationship types with intuitive symbols (A ⊃ B, A → B, A ⋈ B, etc.)
  - Support relationship categories: hierarchical, causal, associative, co-occurrence
- Enable automatic discovery of relationships based on usage patterns
  - Statistical analysis of tag co-occurrences with strength metrics
  - Real-time incremental updates when tags are added/removed
- Provide intelligent tag recommendations based on contextual relevance
- Create dedicated management interface for visualizing and editing relationships
- Support customizable relation groups for organizing related tags
- Add relationship strength thresholds to filter insignificant relationships

* Changelog
* [2.2.13] - 2025-02-18
** Bug Fixes
*** Fix node movement failing due to missing file path
- Fixed node sync to properly save file path information
- Added comprehensive debug logging for node operations
- Improved error handling in node movement process
- Enhanced node property validation before movement
* [2.2.12] - 2024-02-16
** Features
*** Enhanced reference creation with duplicate detection
- Added smart node reference creation that checks for existing nodes
- Reuses existing nodes when title matches exactly
- Prevents duplicate node creation for same content
- Improves reference management efficiency
** Bug Fixes
*** Fix field edit mode keymap and key bindings
- Fixed keymap initialization in org-supertag-field-edit-mode
- Simplified mode definition by removing unnecessary syntax-table
- Fixed key bindings for field editing operations (e, d)
- Improved error handling in field operations

* [2.2.11] - 2024-02-12
** Features
*** Enhanced org-supertag-view with field value display
- Added field value support in tag view table
- Implemented case-insensitive field name matching
- Added comprehensive field value lookup
- Display field values in dedicated columns
- Improved table formatting for better readability

* [2.2.10] - 2024-02-03
** Fix
**** Fix tag company completion not working in heading
**** Fix field edit mode not working

* [2.2.9] - 2024-02-03
** Features
*** Added
- New component: org-supertag-view.el
  - Provides visualization system for tag content
  - Smart command ~org-supertag-view-tag~ that:
    - Shows tag content directly when cursor is on a tag
    - Offers tag completion when not on a tag
  - Table-based view showing:
    - Node titles
    - Node types
    - Creation dates

* [2.2.8] - 2024-02-03
** Bug Fixes
*** Fix tag deletion to ensure complete cleanup
- Replace org-supertag-db-remove-object with direct remhash for reliable deletion
- Add comprehensive cleanup of all tag-related database entries
- Implement proper cleanup sequence for tag removal
- Add debug logging for deletion process tracking
- Add org-supertag-after-tag-delete-hook for post-deletion customization

* [2.2.7] - 2025-02-02
** Features
*** Improve node movement(org-supertag-node-move-node) with outline path display
- Show complete outline structure when moving nodes
- Display paths in "filename / outline-path / title" format
- Improve target location selection with clear hierarchy view
- Keep existing insertion options (file start/end, under/same level)

* [2.2.6] - 2024-1-31
** Features
*** Add comprehensive node finding system
- Add ~org-supertag-node-find~ command for interactive node finding
- Add ~org-supertag-node-find-other-window~ for other window display
- Show complete node path in format "filename / outline-path / title"
- Add robust error handling for missing metadata
- Sort results alphabetically for easier navigation
- Improve node visibility with automatic expansion

* [2.2.5] - 2024-1-30
** Features
*** Add company-mode completion for supertags

This commit adds interactive tag completion using company-mode:
- Add company backend for supertag completion
- Trigger completion with '#' prefix
- Integrate with existing tag management system
- Simplify implementation by reusing org-supertag-tag-add-tag
- Add tag deletion functionality (org-supertag-tag-delete)

The completion system provides a smoother user experience for adding
supertags to org headlines, with proper tag formatting and handling
of preset tags.

* [2.2.4] - 2024-1-29
** Refactor
**** Change field type tag-reference to direct node reference

BREAKING CHANGE: Completely redesign the tag-reference field type to 
reference nodes directly instead of referencing other tag's field values.

Before:
- tag-reference pointed to another tag's field value
- Used for value inheritance between different tags

After:
- tag-reference now directly points to org nodes
- Uses org-mode's link format ([[id:NODE-ID][TITLE]])
- Enables direct node relationships

Changes:
1. Rewrote org-supertag-field--convert-value to handle org-mode link format
2. Modified org-supertag-validate-tag-reference to validate node existence
3. Added node title lookup for better link display

Note: This is a breaking change. Existing tag-reference fields will need 
to be migrated to the new format.


* [2.2.3] - 2025-01-28
** Features
**** Improve field type selection and display
- Add help message showing available field types with descriptions
- Use all field types from org-supertag-field-types instead of hardcoded list
- Format field display with fixed-width alignment for better readability
- Clean up help buffer after type selection
- Improve field editing interface with consistent formatting

* [2.2.2] - 2025-01-26
** Bug Fixes
**** Fix node movement and link creation
- Completely replace original heading with link reference
- Remove redundant title text in reference link
- Maintain proper heading level and spacing
- Ensure link insertion starts at beginning of line
- Add proper error handling for nil values
- Update documentation for modified behavior

* [2.2.1] - 2025-01-26
** Refactor: Improve query history handling and fix node navigation

- Fix history saving for multi-keyword queries
- Store complete search queries in history
- Fix recenter error in node navigation
- Improve error handling in node lookup
- Add proper return values for navigation functions
- Update documentation for modified functions


* [2.2.0] - 2025-01-25
** Features
**** Add automatic node creation for org headlines
- Add ~org-supertag-sync-auto-create-node~ to control auto creation
- Add ~org-supertag-sync-node-creation-level~ for minimum level
- Modify ~org-supertag-db-update-buffer~ to handle auto creation
- Update ~org-supertag-sync--process-node~ for auto conversion

This change enables automatic conversion of org headlines to nodes
during synchronization, making node creation more seamless while
maintaining control through customization options.

**** Add directory scope control for synchronization
- Add org-supertag-sync-directories for monitored directories
- Add org-supertag-sync-exclude-directories for excluded paths
- Add org-supertag-sync-file-pattern for file matching
- Add helper functions for directory management:
  - ~org-supertag-sync-add-directory~
  - ~org-supertag-sync-remove-directory~
  - ~org-supertag-sync-list-directories~

*** Improve 
**** File organization
- Move org-supertag-sync-state.el to org-supertag-data-directory
  - Add directory existence check in org-supertag-sync-init
  - Keep data files organized under ~/.emacs.d/org-supertag/

*** Bug Fixes
**** Fix node movement reference format
- Now completely replaces original heading with link reference
- Removes redundant title text in reference link
- Maintains proper heading level and spacing


* [2.1.0] - 2025-01-18

** Features
*** Node: Enhanced node movement functionality
**** Added interactive node movement command
- Added ~org-supertag-node-move-node~ for direct node movement
- Support comprehensive insertion positions:
  - File start (after org-mode header)
  - File end
  - Under selected heading
  - Same level as selected heading
- Added clear error messages and operation feedback
**** Added file start position support
- Added helper function to locate content start after org-mode header
- Added "File Start" option for node movement and export operations
- Improved file header preservation during node operations
- Better integration with existing query and export features

* [2.0.0] - 2025-01-13

** Features
*** Behavior: Added schedule trigger and deadline management system
**** Implemented cron-style scheduling for behaviors
- Format: "minute hour day month weekday"
- Examples:
  - "0 9 * * 1-5" (weekdays at 9:00)
  - "30 * * * *" (every hour at :30)
  - "0 0 1 * *" (first day of each month)
**** Added native org-mode timestamp integration
- Support for SCHEDULED and DEADLINE timestamps
- Support for absolute timestamps (<2024-03-20 Wed>)
- Support for relative time expressions (now+2h, now-1d)
- Support for property-based timing (${prop:DEADLINE}-2h)
**** Added deadline check behavior (@deadline-check)
**** Added derived behaviors for deadline management:
- @overdue-urgent: Set high priority for overdue tasks
- @upcoming-deadline: Mark tasks due in next 3 days
- @overdue-archive: Archive overdue completed tasks

*** Field: Enhanced timestamp handling
- Improved org-mode timestamp format support
- Date fields now use active timestamps (<...>) for agenda visibility
- Timestamp fields use inactive timestamps ([...]) for historical records
- Added automatic format conversion between different timestamp styles

*** Behavior Template: Added template variable system for behaviors
**** Added support for dynamic variable expansion
- ${input:prompt} for user input
- ${date:format} for date operations
- ${prop:name} for property access
- ${context:key} for shared data
**** Added conditional execution with {if:condition}
**** Added relative date calculations (now+1d, now-1w)
**** Added simple context object for data sharing

*** Node Management: Added new node operations
- Added ~org-supertag-move-node-and-link~ command for node relocation with reference
- Added ~org-supertag-delete-node~ command for complete node cleanup
- Added flexible node movement behaviors
- Support for keeping links at original location
- Interactive target selection

*** Sync: Added automatic synchronization system
- Added file state tracking
- Added buffer modification monitoring
- Added automatic sync with conflict detection
- Added state persistence and error recovery
- Added node-level conflict analysis command
- Added file analysis tools for debugging sync issues

*** Query: Enhanced query system
- Added cursor-based node insertion in query buffer
- Added history support for query keywords
- Added customizable history size
- Preserved last used keywords

*** Reference: Improved reference system
- Added reference type tracking (ref-from)
- Added reference count tracking

*** Tag: Added improved tag change functionality

*** Performance: Added asynchronous face refresh mechanism

** Bug Fixes
*** Fixed tag prefix matching issues (#9)
- Improved tag completion with custom completion function
- Added TAB completion support
*** Fixed field type options insertion
*** Fixed behavior system event handling
*** Improved error handling in node operations
*** Enhanced synchronization stability

** Refactoring
*** Query: Rewritten query results display using ewoc for better performance
*** Query: Implemented query buffer reuse for cursor insertion
*** Behavior: Improved behavior system architecture with detach support
*** Sync: Enhanced file synchronization architecture

** Internal Changes
- Added scheduler system with task management
- Added robust file synchronization mechanism
- Optimized reference handling with better metadata tracking
- Optimized query result caching
- Improved node deletion with comprehensive cleanup
- Enhanced query system with history management
- Improved code organization and modularity
- Enhanced documentation and examples
